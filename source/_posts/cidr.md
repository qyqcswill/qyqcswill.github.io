---
title: 无类别域间路由(CIDR)
---
> 可能见过 192.0.0.0/8，192.168.0.0/16，192.168.9.0/24，192.168.9.9/32，你了解过具体含义吗？CIDR(Classless Inter-Domain Routing)。类似于这些CIDR的起始**IP**和终止**IP**都比较好计算，但是，如果是 192.0.0.0/8，192.168.9.0/27，这些的IP起始和终止该如何计算呢？

# CIDR
`无类别域间路由`（Classless Inter-Domain Routing、CIDR）是一个用于给用户分配IP地址以及在互联网上有效地路由IP数据包的对IP地址进行归类的方法，表现形式位IP地址/网络ID的位数，在这种表示方法中，网络ID的位数也可以称为掩码位，通过该掩码位，可以确定子网掩码，起始IP和终止IP。

# 子网掩码和IP范围计算
比如，我们给定一个地址 192.168.1.0/25，那么这个`CIDR`的子网掩码和对应的网段该如何计算？首先，我们将该地址转换成2进制表示
```bash
192.168.1.0/25
11000000.10101000.00000001.00000000/25
|------ 25位  -------------|
## 子网掩码
11111111.11111111.11111111.10000000
==> 255.255.255.128
```
按照如上所示，子网掩码的计算，按照掩码位数字进行计算，前[掩码数]位全部是1，后[32-掩码数]位全部是0，实例中掩码数是25，则子网掩码是255.255.255.128，掩码计算相对比较简单。那么其实 IP 和终止IP该如何计算呢？
```bash
192.168.1.0/25
11000000.10101000.00000001.00000000/25
|------ 25位  -------------|-后7位-|
前25位不变，后七位从0000000 到 1111111
起始IP: 11000000.10101000.00000001.00000000
终止IP: 11000000.10101000.00000001.01111111

## 换算
192.168.1.0 ～ 192.168.1.127 ，一共128个IP
```
按照如上计算方式，计算位数从[掩码位+1]开始计算，这里是25，那么从26位到32位开始计算IP，一共7位，最小二进制全是0（0），最大二进制全是1（127），那么起始的ip就是 192.168.1.0，终止的IP就是192.168.1.127

# 训练
## 192.168.1.64/25
```bash
192.168.1.64/25
11000000.10101000.00000001.01000000/25

起始IP: 11000000.10101000.00000001.00000000
终止IP: 11000000.10101000.00000001.01111111

## 换算
192.168.1.0 ～ 192.168.1.127 ，一共128个IP
```
这里，我们发现 192.168.1.0～127/25，这里对应的IP地址范围其实是一样的

## 192.168.1.128/25
```bash
192.168.1.0/25
11000000.10101000.00000001.10000000/25

起始IP: 11000000.10101000.00000001.10000000
终止IP: 11000000.10101000.00000001.11111111

## 换算
192.168.1.128 ～ 192.168.1.255 ，一共128个IP
```


## 192.168.1.128/28
```bash
192.168.1.0/28
11000000.10101000.00000001.10000000/28

起始IP: 11000000.10101000.00000001.10000000
终止IP: 11000000.10101000.00000001.10001111

## 换算
192.168.1.128 ～ 192.168.1.143 ，一共2^(32-28)个IP
```
在这里，不知道你发现没有，每个CIDR 支持的IP 数量就是 2^(32-掩码位)


